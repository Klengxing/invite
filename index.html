<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>乔迁之喜</title>
    <meta name="description" content="">
    <meta name='viewport' content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no'/>
    <meta name='apple-mobile-web-app-capable' content='yes' />
    <meta name='screen-orientation' content='portrait' />
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <link rel="stylesheet" href="css/index.css">
    <style>
        
    </style>
    <script src="https://cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
</head>
<body>
    <section id="contain" style="transform: translate3d(0px, 0px, 0px);">
        <section class="page red" id="first">
            <div class="">
                <img src="image/img1.png" alt="背景框" title="背景框" class="bg">
                <img src="image/img2.png" alt="灯笼" title="灯笼" class="left-lantern">
                <img src="image/img2.png" alt="灯笼" title="灯笼" class="right-lantern">
                <img src="image/img4.png" alt="线" title="线" class="left-line">
                <img src="image/img3.png" alt="乔迁" title="乔迁" class="en-bottom">
                <img src="image/img4.png" alt="线" title="线" class="right-line">
                <img src="image/text.png" alt="乔迁之喜" title="乔迁之喜" class="text1">
                <h5 class="b-26">农历腊月24日中午12点</h5>
                <h5 class="b-22">鲁家村(鲁家大院)</h5>
                <h5 class="b-18">诚邀您携家人一起参加宴会</h5>
            </div>
        </section>
        <section class="page blue" id="second">
            <div class="op-0">
                <img src="image/img1.png" alt="背景框" title="背景框">
                <img src="image/img2.png" alt="灯笼" title="灯笼">
                <img src="image/img2.png" alt="灯笼" title="灯笼">
                <img src="image/img4.png" alt="线" title="线">
                <img src="image/img3.png" alt="乔迁" title="乔迁">
                <img src="image/img4.png" alt="线" title="线">
                <h3>诚挚邀请</h5>
                <div class="">
                    <p class="mb-15">送呈&nbsp;&nbsp;<span class="fz-22">亲朋好友</span>&nbsp;&nbsp;台启</p>
                    <div class="flex mb-30">
                        <div class="lh-42">谨定于&nbsp;&nbsp;</div>
                        <div>
                            <p class="c-FFE">公历&nbsp;&nbsp;2020年1月18日</p>
                            <p class="c-FFE">农历&nbsp;&nbsp;腊月二十四</p>
                        </div>
                    </div>
                    <div class="bolder">举行新居落成并乔迁之喜</div>
                    <div class="bolder mb-30">敬备佳宴&nbsp;&nbsp;恭请光临</div>
                    <div class="c-FFE">时间：中午12:00</div>
                    <div class="c-FFE mb-30">地点：鲁家村(鲁家大院)</div>
                    <div class="flex tr">
                        <div>
                            <p>张根深</p>
                            <p>沈泽英</p>
                        </div>
                        <div class="lh-42">&nbsp;&nbsp;敬邀</div>
                    </div>
                </div>
            </div>
        </section>
        <section class="page yellow" id="third">
            <div class="op-0">
                <img src="image/img1.png" alt="背景框" title="背景框">
                <img src="image/img2.png" alt="灯笼" title="灯笼">
                <img src="image/img2.png" alt="灯笼" title="灯笼">
                <img src="image/img4.png" alt="线" title="线">
                <img src="image/img3.png" alt="乔迁" title="乔迁">
                <img src="image/img4.png" alt="线" title="线">
                <h3>地理位置</h5>
                <div>
                    <img class="" src="image/address.png" alt="地图"></img>
                    <!-- <div class="flex space-between">
                        <div>鲁家村(鲁家大院)</div> -->
                    <a href="https://map.qq.com/?type=marker&isopeninfowin=1&markertype=1&pointx=108.84&pointy=32.7305&name=%E9%B2%81%E5%AE%B6%E5%A4%A7%E9%99%A2&addr=%E9%99%95%E8%A5%BF%E7%9C%81%E5%AE%89%E5%BA%B7%E5%B8%82%E6%B1%89%E6%BB%A8%E5%8C%BA%E5%A4%A7%E5%90%8C%E5%88%9D%E4%B8%AD%E8%A5%BF%E5%8D%97100%E7%B1%B3&ref=WeChat">去这里</a>
                    <!-- </div> -->
                </div>
            </div>
        </section>
    </section>
    <img src="image/back.png" alt="下滑" title="下滑" class="back">
    <script type="text/javascript">
        var oBtn = document.getElementById("contain")
        var startY,endY,moveY,Y
        var index = 3
        var pageNum = 0
        var pageTotalNum = oBtn.getElementsByTagName("section").length
        // var pageH = window.screen.availHeight
        var pageH=document.body.offsetHeight
        oBtn.addEventListener("touchstart",function(ev){
            ev.preventDefault();
            startY = ev.touches[0].pageY;
            oldY = startY
        }, false);
        oBtn.addEventListener("touchmove",function(ev){
            ev.preventDefault();
            moveY = ev.touches[0].pageY;
            let y = moveY-startY
            let ds = getDistance(oBtn)
            // console.log(ds)
            if(y<0){  //下一页
                ds -= 5
                oBtn.style.transform="translate3d(0," + ds + "px, 0)"
                oBtn.style.webkitTransform = 'translate3d(0,' + ds + 'px, 0)';
            }else if(y>0){  //上一页
                ds += 5
                oBtn.style.transform="translate3d(0," + ds + "px, 0)"
                oBtn.style.webkitTransform = 'translate3d(0,' + ds + 'px, 0)';
            }
            oldY = moveY
        }, false);
        oBtn.addEventListener('touchend',function(ev){
            ev.preventDefault();
            endY = ev.changedTouches[0].pageY;
            let y = endY-startY
            if(y<0){  //下一页
                if(pageNum<pageTotalNum-1){
                    pageNum=pageNum+1
                }
                oBtn.style.transform="translate3d(0,-" + pageNum*pageH + "px, 0)"
                oBtn.style.webkitTransform = 'translate3d(0,-' + pageNum*pageH + 'px, 0)';
                oBtn.style.transition="transform 1s"
            }else if(y>0){  //上一页
                if(pageNum>0){
                    pageNum=pageNum-1
                }
                oBtn.style.transform="translate3d(0,-" + pageNum*pageH + "px, 0)"
                oBtn.style.webkitTransform = 'translate3d(0,-' + pageNum*pageH + 'px, 0)';
                oBtn.style.transition="transform 1s"
            }
            setTimeout(()=>{
                fixPage(pageNum)
            },1000)
        }, false);
        /*获取位置*/
        function getDistance(theSlider){
            return parseInt(theSlider.style.transform.split(',')[1]);
        }
        // 添加动画
        function addClassName(obj){
            $("#"+obj+">div").css("opacity","1")
            $("#"+obj+" div img").eq(0).addClass("bg")
            $("#"+obj+" div img").eq(1).addClass("left-lantern")
            $("#"+obj+" div img").eq(2).addClass("right-lantern")
            $("#"+obj+" div img").eq(3).addClass("left-line")
            $("#"+obj+" div img").eq(4).addClass("en-bottom")
            $("#"+obj+" div img").eq(5).addClass("right-line")
            $("#"+obj+" div h3").eq(0).addClass("o")
            $("#"+obj+">div>div").eq(0).addClass("main-text")   
        }
        // 修正当前页
        function fixPage(pageNum){
            let obj
            switch(pageNum){
                case 0:
                    obj = "first"
                    break;
                case 1:
                    obj = "second"
                    break;
                case 2:
                    obj = "third"
                    break;
                case 3:
                    obj = "fourth"
                    break;
                case 4:
                    obj = "fifth"
                    break;
                default:
                    break;
            }
            addClassName(obj)
        }
    </script>
</body>
</html>